= Configure Environment, User, and Role Access
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../assets/images/

Anypoint Platform lets you manage the xref:access-management::managing-permissions.adoc[roles] of those who administer the Anypoint MQ features in Anypoint Platform for your organization.

== Create an Environment

Before you can give yourself Anypoint MQ access permissions, you need an environment with which to associate permissions.

. Log in to Anypoint Platform.
. Click *Access Management* from the left navigation bar or click *Access Management* from the main Anypoint Platform screen.
. Click *Environments* under *ACCESS MANAGEMENT*, and click *Add environment*:
// +
// image::mq-add-env.png[]
// +
. In the *Add Environment* screen, provide a name for your environment, and click either *Production*, *Sandbox*, or *Design*. You might want to create separate environments for each. In this case, choose *Production*.
// +
// image::mq-create-env.png[]

== Give Users Anypoint MQ Access Permissions

First, give yourself Anypoint MQ access permissions and then give others in your organization access.

Assign user permissions to yourself for use with Anypoint MQ. These permissions enable you to create client applications and destinations by creating queues and exchanges. You can use the same information to assign user permissions for others in your organization.

To assign user permissions:

. In Anypoint Platform, click *Access Management and Users*.
. Click a user name value:
// +
// image::mq-am-users.png[]
// +
. Click *MQ* and set an environment and permissions.
+
image::mq-acc-mgmt-user-detail.png[]
+
. Click the drop-down list and select an item from the menu.
+
For permissions, you can click *Select all* to set all permissions, or *Select none* to erase previously clicked settings.
. Click the blue plus icon to add the selection:
+
image::mq-blue-plus-icon.png[]
+
The selected environment and permissions appear below the drop-down list.
// +
// image::mq-perms-display.png[]
+
You can delete items from this list by clicking the delete icon:
+
image::mq-delete-item.png[]


== Create an Admin Role

You can create a role that you can apply to other users in your organization.
While you don't need roles to complete this tutorial, when you use Anypoint MQ as an administrator or developer, you should create
roles for all those in your organization who use MQ.

Creating a role lets you assign access rights to users in your organization, such as for administrators, developers, or for those who only view information but don't change it.

. In Anypoint Platform, click *Access Management* > *Roles*.
. Click *Add Role*.
// +
// image::mq-roles-add-role.png[]
// +
. Name the role `Admin Role` and click the *Add role* button.
. Click the role name and click *MQ*.
. Specify the *Production* Environment, and set all the Permissions by clicking *Select all*:
// +
// image::mq-admin-role-detail.png[]
// +
. Click the blue plus button to add the selections. Anypoint Platform displays your settings.

The settings are:

* *Clear destinations*: Same privileges as *View destinations*, plus permission to purge messages
* *Manage clients*: Same privileges as *View clients*, plus permission to create client apps
* *Manage destinations*: Same privileges as *View destinations* and *Clear destinations*, plus permission to:
    ** Create new queues and message exchanges
    ** Edit existing queues and message exchange settings
    ** Access *Message Sender* and *Browser* pages
    ** Delete messages
* *View clients*: View all client apps and the client App IDs and client secrets for each client app
* *View destinations*: View all destinations and each destination's settings (*ID*, *Type*, *Message TTL*,and *Message Lock Default TTL*). View *In Queue* messages and *In Flight* messages.


=== Add Other Roles For Anypoint MQ Access

After you create an admin role, you can optionally create other roles for users in your organization who need Anypoint MQ access in Anypoint Platform.

. In Anypoint Platform, click *Access Management* > *Roles*.
. Click *Add role*.
// +
// image::mq-roles-add-role.png[]
// +
. Type the role name and description, and click *Add role*.
// +
// image::mq-add-role-edit-fields.png[]
// +
. In the list of roles, click the name of the role you just created:
// +
// image::mq-roles-list.png[]
// +
. Click *MQ* and set an environment and permissions. 
+
image::mq-acc-mgmt-user-detail.png[]
+
. Click the drop-down list and select an item from the menu.
+
For permissions, you can click *Select all* to set all permissions, or *Select none* to erase previously clicked settings.
. Click the blue plus icon to add the selection:
+
image::mq-blue-plus-icon.png[]
+
The selected environment and permissions appear below the drop-down list.
// +
// image::mq-perms-display.png[]
+
You can delete items from this list by clicking the delete icon:
+
image::mq-delete-item.png[]
+
You can also delete a role from the *Roles* page by clicking the checkbox for an entry, clicking *Delete role*, then confirming the deletion by clicking *Yes, delete*.

== Switch Environments

. In Anypoint Platform, click *MQ*, and then click *Design*.
// : image:mq-production-button.png[].
. In the *Switch Environment* screen, you can switch a different environment or change your default environment:
    ** To switch to a different environment, click the name of that environment, for example, *Sandbox* if you previously created a Sandbox environment, and click *Switch*.
    ** To change your default environment, click *Open your profile to change the default environment* and choose a different environment from the *Default* environment drop-down list.

== See Also

* xref:mq-faq.adoc[Anypoint MQ FAQ]
